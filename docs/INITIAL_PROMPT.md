# Read your writes consistency

- We need to build a poc to test read your writes consistency
- For that we need following components
    - Web (React client)
    - API
    - Redis
    - SQL Server database cluster
        - Master
        - Read replica
- For UI
    - ShadCn is already installed, we need to use them
        - All components are in-place no need to add more
    - API call will be driven by react query
- There will be fixed set of users
    - There is no authentication
- There will be a dropdown in header where system will mimic the authentication for current selected user
    - If you select one user, all api will work as if that user is requesting
- Beside the user dropdown there will be another dropdown to select the consistency behavior 
    - None -> All api calls will be of V1 version
    - Read your writes -> All api call will be of V2 version
    - Currently v2 APIs will not be implemented, so calling it will throw error but still we want to wire up that behavior so later when we implement v2 apis, we do not need to change in front end.
- Beside the consistency dropdown there will be a area where it will show if the current query will be served from master database or replica
    - All request will be a page level request
        - There will be one single request to load entire content of any page
        - No component level GET api calls, we can have model level api call to add/update/delete project/task
    - After adding/updating/deleting the user entire page level api will be refreshed
- We need to create a simple app
    - Dashboard shows cards grid for projects
    - Each project shows
        - Project name
        - New tasks count
        - Active tasks count
        - Blocked tasks count
        - Last updated date
        - View button
- User can create new project with
    - Project name
    - Project members
- User can open project and it will show
    - List of tasks which has following columns
        - Id
        - Name
        - Status
        - User name
        - Last modified date
    - Entire crud for tasks
- For API side
    - There will be two db contexts (IMPORTANT: THESE ARE NOT EF Core DB Context)
        - ReadDbContext
        - ReadWriteDbContext
    - We will user Dapper for data query
    - We will only call stored procedures
    - All get APIs will be using ReadDbContext
    - All write APIs will be using ReadWriteDbContext
    - Initially we will create only V1 API (until application is stable)
    - We have Services/Endpoints/Models folder, we will keep all logic in API project only
    - We have a database projects where we will maintain all tables and stored procedures
    - We need to prepare a seed script with users/projects/tasks with dummy (but real world sounding) data
- Priority
    - Database with seed script first
    - V1 APIs
    - UI